(this["webpackJsonpdialog-engine"]=this["webpackJsonpdialog-engine"]||[]).push([[0],{19:function(e,t,n){"use strict";n.r(t);var a=n(6),s=n(11),r=n.n(s),i=n(2),o=n(3),c=n(5),l=n(8),h=n(7),d=(n(9),n(1)),u=n.n(d),g=n(4),p=function(){function e(t,n,a){Object(i.a)(this,e),this.message=null!==t&&void 0!==t?t:"",this.sMark=a,this.lenMark=a.length,e.logIt("constructor init..."),this.start=this.message.indexOf(a,n),this.hasMark=this.start>-1,this.end=-1,this.key=null,this.hasKey=this.hasKey.bind(this),this.replaceMark=this.replaceMark.bind(this)}return Object(o.a)(e,[{key:"hasKey",value:function(){if(this.key=null,this.safeMessage=this.message.length-this.lenMark,e.logIt("------ NEW HASKEY ------ start: "+this.start+", "+this.message),this.start>-1&&this.start<this.safeMessage)if(this.start=this.message.indexOf(this.sMark,this.start),this.hasMark=this.start>-1,this.keyStart=this.hasMark?this.start+this.lenMark:-1,this.keyStart>this.start){var t=this.message.indexOf("}",this.keyStart);e.logIt("start: "+this.start+", keyStart: "+this.keyStart+", endBrace: "+t),t>this.keyStart?(this.end=t,this.key=this.message.substring(this.keyStart,this.end),e.logIt("Extracted: "+this.key),this.end<this.safeMessage?this.hasMark=this.message.indexOf(this.sMark,this.end+1)>-1:this.hasMark=!1,e.logIt("post hasMark ? "+this.hasMark)):e.logIt("endBrace is not greater then keyStart!")}else e.logIt("keyStart is not greater then start!");else e.logIt("hasKey NOT processed...");return null!==this.key}},{key:"replaceMark",value:function(t){var n,a;return null!==this.key?(null!==t?(a=String(t),this.start>0?(e.logIt("get frontEnd chars only: 0 > "+this.start),n=this.message.substring(0,this.start)+a,this.start=this.start+a.length,e.logIt("frontEnd + val start: "+this.start+", "+n)):(e.logIt("got NO frontEnd, just: "+a),n=a,this.start=a.length),e.logIt("new start: "+this.start+", "+n),this.end<this.message.length-1&&(n+=this.message.substring(this.end+1),e.logIt("adding the End, start: "+this.start+", "+n)),this.message=n,e.logIt("new message: "+this.message)):(this.start=this.end+1,e.logIt("replaceMark received NULL val! new start: "+this.start)),this.keyStart=-1,this.end=-1,this.key=null):e.logIt("replaceMark received NULL key!"),this.message}},{key:"prepNextMark",value:function(){}}],[{key:"logIt",value:function(e){}}]),e}(),b="engine",m=function e(){Object(i.a)(this,e)};m.getApplicationJson=function(){var e=Object(g.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(b+t,{method:"GET",mode:"cors",referrerPolicy:"no-referrer",headers:{Accept:"application/json","Access-Control-Allow-Origin":"*"}});case 2:return n=e.sent,e.next=5,n.json();case 5:if(a=e.sent,200===n.status){e.next=8;break}throw new Error("HttpError: "+n.status+":"+a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m.postApplicationJson=function(){var e=Object(g.a)(u.a.mark((function e(t,n){var a,s,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=JSON.stringify(n),s=a.length,e.next=4,fetch(b+t,{method:"POST",mode:"cors",referrerPolicy:"no-referrer",headers:{"Content-Type":"application/json","Content-Length":s,Accept:"application/json","Access-Control-Allow-Origin":"*"},body:a});case 4:return r=e.sent,e.next=7,r.json();case 7:if(i=e.sent,200===r.status){e.next=10;break}throw new Error("HttpError: "+r.status+":"+i.message);case 10:return e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var j=m,f=function e(){Object(i.a)(this,e)};f.getChainedMessage=function(){var e=Object(g.a)(u.a.mark((function e(t,n,a){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&0!==t.length){e.next=2;break}throw new Error("Invalid ChainedMessage Key");case 2:if(null!=n&&"object"===typeof n){e.next=4;break}throw new Error("Invalid GameState");case 4:if(!a||!0!==a){e.next=10;break}return e.next=7,j.postApplicationJson("/chainedMessage/".concat(t,"?newlines"),n);case 7:case 12:return e.abrupt("return",e.sent);case 10:return e.next=12,j.postApplicationJson("/chainedMessage/".concat(t),n);case 13:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),f.getChainedMessageKeys=Object(g.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getApplicationJson("/chainedMessages");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));var O=f,v=function e(){Object(i.a)(this,e)};v.getRandomMessage=function(){var e=Object(g.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&0!==t.length){e.next=2;break}throw new Error("Invalid RandomMessage Key");case 2:if(null!=n&&"object"===typeof n){e.next=4;break}throw new Error("Invalid GameState");case 4:return e.next=6,j.postApplicationJson("/randomMessage/".concat(t),n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v.getRandomMessageKeys=Object(g.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getApplicationJson("/randomMessages");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));var x=v,y=function e(){Object(i.a)(this,e)};y.getMessage=function(){var e=Object(g.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&0!==t.length){e.next=2;break}throw new Error("Invalid Message Key");case 2:if(null!=n&&"object"===typeof n){e.next=4;break}throw new Error("Invalid GameState");case 4:return e.next=6,j.postApplicationJson("/message/".concat(t),n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y.getMessageKeys=Object(g.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getApplicationJson("/messages");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));var S=y,k=function e(){Object(i.a)(this,e)};k.getSynonym=function(){var e=Object(g.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&0!==t.length){e.next=2;break}throw new Error("Invalid Synonyms Key");case 2:return e.next=4,j.getApplicationJson("/synonym/".concat(t));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k.getSynonyms=function(){var e=Object(g.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t&&0!==t.length){e.next=2;break}throw new Error("Invalid Synonyms Key");case 2:return e.next=4,j.getApplicationJson("/synonyms/".concat(t));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k.getSynonymKeys=Object(g.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getApplicationJson("/synonyms");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));var w=k,N=function e(t){var n,a,s;Object(i.a)(this,e),this.message=null!==(n=t.message)&&void 0!==n?n:"",this.trigger=null!==(a=t.trigger)&&void 0!==a?a:"",this.actions=null!==(s=t.actions)&&void 0!==s?s:""},I="$c{",C="$m{",L="$r{",M="$s{",P="$lst{",A=function(){function e(t){var n,a,s,r=this;Object(i.a)(this,e),this.getMessaging=function(){var e=Object(g.a)(u.a.mark((function e(t,n,a){var s,r,i,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=new p(t,0,a),o=[],c=n.location;case 3:if(!s.hasMark||!s.hasKey()){e.next=28;break}r=s.key,console.log("Downloading "+a+" message for id: "+r),e.t0=a,e.next=e.t0===I?9:e.t0===L?12:e.t0===C?15:e.t0===M?18:e.t0===P?21:24;break;case 9:return e.next=11,O.getChainedMessage(r,n,!1).then((function(e){i=e.message}));case 11:return e.abrupt("break",25);case 12:return e.next=14,x.getRandomMessage(r,n).then((function(e){i=e.message}));case 14:return e.abrupt("break",25);case 15:return e.next=17,S.getMessage(r,n).then((function(e){i=e.message}));case 17:return e.abrupt("break",25);case 18:return e.next=20,w.getSynonym(r).then((function(e){i=e.synonym}));case 20:return e.abrupt("break",25);case 21:return i="","npc"===r&&(o=c.getNPCs(c.zone)).length>0&&(o.forEach((function(e){i+=e.display+", "})),i=i.slice(0,-2)),e.abrupt("break",25);case 24:i=" <unknown.message> ";case 25:s.replaceMark(i),e.next=3;break;case 28:return e.abrupt("return",s.message);case 29:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),this.doEnvironment=function(){var t=Object(g.a)(u.a.mark((function t(n,a){var s,i,o,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.logIt("doEnvironment called with: "+n),t.next=3,r.getMessaging(n,a,I);case 3:return s=t.sent,t.next=6,r.getMessaging(s,a,L);case 6:return i=t.sent,t.next=9,r.getMessaging(i,a,C);case 9:return o=t.sent,t.next=12,r.getMessaging(o,a,M);case 12:return c=t.sent,t.abrupt("return",c);case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.doInput=function(){var t=Object(g.a)(u.a.mark((function t(n,a){var s,i,o,c,l;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.logIt("doInput called with: "+n),t.next=3,r.getMessaging(n,a,I);case 3:return s=t.sent,t.next=6,r.getMessaging(s,a,L);case 6:return i=t.sent,t.next=9,r.getMessaging(i,a,C);case 9:return o=t.sent,t.next=12,r.getMessaging(o,a,M);case 12:return c=t.sent,t.next=15,r.getMessaging(c,a,P);case 15:return l=t.sent,t.abrupt("return",l);case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.doOutput=function(){var t=Object(g.a)(u.a.mark((function t(n,a){var s,i,o,c,l,h,d,g,p,b,m,j,f;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.logIt("doOutput called with: "+n),s=n.split("|"),i=[],o=0;case 4:if(!(o<s.length)){t.next=30;break}if(c="",l="",h="",d=s[o].indexOf(":"),!(null!=(g=d>0?s[o].substring(0,d):0===d?"":s[o])&&g.length>0)){t.next=24;break}return t.next=13,r.getMessaging(g,a,I);case 13:return p=t.sent,t.next=16,r.getMessaging(p,a,L);case 16:return b=t.sent,t.next=19,r.getMessaging(b,a,C);case 19:return m=t.sent,t.next=22,r.getMessaging(m,a,M);case 22:j=t.sent,c=j;case 24:(f=d>-1?s[o].indexOf(":",d+1):-1)>d?(l=f>d+1?s[o].substring(d+1,f):"",h=f<s[o].length?s[o].substring(f+1):""):d>-1&&(l=s[o].substring(d+1),h=""),i.push(new N({message:c,trigger:l,actions:h}));case 27:o++,t.next=4;break;case 30:return t.abrupt("return",i);case 31:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),this.loadWatcher=Object(g.a)(u.a.mark((function t(){var n,a,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.logIt("commencing dynamic message processing and loading..."),!(r.endGameState.row.e.length>0&&!1===r.envLoading)){t.next=10;break}return r.envLoading=!0,r.envDoneLoading=!1,n=null,t.next=7,r.doEnvironment(r.endGameState.row.e,r.endGameState).then((function(e){n=e}));case 7:e.logIt("doEnvironment response: \n"+n),r.endGameState.envtext=n,r.envDoneLoading=!0;case 10:if(!(r.endGameState.row.i.length>0&&r.endGameState.lastrow!==r.lastRow&&!1===r.insLoading)){t.next=19;break}return r.insLoading=!0,r.insDoneLoading=!1,a=null,t.next=16,r.doInput(r.endGameState.row.i,r.endGameState).then((function(e){a=e}));case 16:e.logIt("doInput response: "+a),r.endGameState.instext=r.endGameState.instext.concat("\n",a,"\n"),r.insDoneLoading=!0;case 19:if(!(r.endGameState.row.o.length>0&&r.endGameState.lastRow!==r.lastRow&&!1===r.outLoading)){t.next=28;break}return r.outLoading=!0,r.outDoneLoading=!1,s=null,t.next=25,r.doOutput(r.endGameState.row.o,r.endGameState).then((function(e){s=e}));case 25:e.logIt("doOutput response: "+JSON.stringify(s)),r.endGameState.outOptions=s,r.outDoneLoading=!0;case 28:!0===r.envDoneLoading&&!0===r.insDoneLoading&&!0===r.outDoneLoading&&(e.logIt("MessageWatcher finished. Invoking callback function..."),clearInterval(r.loadTimer),r.caller(r.endGameState));case 29:case"end":return t.stop()}}),t)}))),this.name=null!==(n=t.name)&&void 0!==n?n:"Test Game",this.outHandler=t.outHandler,this.lastRow=null!==(a=t.lastRow)&&void 0!==a?a:-1,this.logic=null!==(s=t.logic)&&void 0!==s?s:[],this.processLoop=this.processLoop.bind(this),this.checksPass=this.checksPass.bind(this),this.checkPropertyValues=this.checkPropertyValues.bind(this),this.setPropertyValues=this.setPropertyValues.bind(this),this.getMessaging=this.getMessaging.bind(this),this.doActions=this.doActions.bind(this),this.doEnvironment=this.doEnvironment.bind(this),this.doInput=this.doInput.bind(this),this.doOutput=this.doOutput.bind(this),this.getPropertyRange=this.getPropertyRange.bind(this),this.setHandlers=this.setHandlers.bind(this),this.loadWatcher=this.loadWatcher.bind(this),this.loadTimer="",this.envLoading=!1,this.insLoading=!1,this.outLoading=!1,this.envDoneLoading=!1,this.insDoneLoading=!1,this.outDoneLoading=!1,this.endGameState=null,this.caller=null}return Object(o.a)(e,[{key:"setHandlers",value:function(e){this.outHandler=e.outHandler}},{key:"getPropertyRange",value:function(e){var t=e.split("-"),n=Number(t[0]),a=Number(t[1]),s=Number(a-n+1);return Math.floor(Math.random()*s)+n}},{key:"setPropertyValues",value:function(e,t,n){for(var a,s,r,i,o=new p(e,0,n);o.hasMark&&o.hasKey();)s=(a=o.key.split(":"))[0],r=a[1],"delay"===s&&r.indexOf("-")>0?t[s]=this.getPropertyRange(r):0===r.indexOf("++")?(null==(i=t[s])?i=0:(i=Number(i),isNaN(i)&&(i=0)),i++,t[s]=i):0===r.indexOf("--")?(null==(i=t[s])?i=0:(i=Number(i),isNaN(i)&&(i=0)),i--,t[s]=i):t[s]=r,o.replaceMark(s);return t}},{key:"doActions",value:function(t,n){return e.logIt("doActions called with: "+t),n.player=this.setPropertyValues(t,n.player,"$p{"),n.location=this.setPropertyValues(t,n.location,"$l{"),n.loop=this.setPropertyValues(t,n.loop,"$x{"),n}},{key:"checkPropertyValues",value:function(e,t,n){for(var a,s,r,i,o=new p(e,0,n);o.hasMark&&o.hasKey();){if(s=(a=o.key.split(":"))[0],r=a[1],i=t[s],"!"===r){if(null!=i)return!1}else if(0===r.indexOf("!")){if(r=r.slice(1),null!=i&&r==i)return!1}else if(0===r.indexOf(">")){if(r=r.slice(1),null==i)return!1;if(i=Number(i),r=Number(r),isNaN(i)||isNaN(r)||i<=r)return!1}else if(0===r.indexOf("<")){if(r=r.slice(1),null==i)return!1;if(i=Number(i),r=Number(r),isNaN(i)||isNaN(r)||i>=r)return!1}else if(null==i||r!=i)return!1;o.replaceMark(s)}return!0}},{key:"checksPass",value:function(e,t){return!!(this.checkPropertyValues(e,t.player,"$p{")&&this.checkPropertyValues(e,t.location,"$l{")&&this.checkPropertyValues(e,t.loop,"$x{"))}},{key:"processLoop",value:function(t,n){var a,s;this.caller=n,e.logIt("beginning loop of "+this.logic.length+" rows.");var r=t.location,i=t.loop,o=null!==(a=r.npc)&&void 0!==a?a:"";o.length>0&&"none"===o&&(o="");var c=null;t.row=null,t.envtext="",this.lastRow=null!==(s=t.lastRow)&&void 0!==s?s:0;var l=0;for(l=0;l<this.logic.length&&(!((c=this.logic[l]).w.length>0&&c.w===r.world&&c.z.length>0&&c.z===r.zone&&(c.n.length>0&&c.n===o||0===c.n.length&&0===o.length)&&c.t.length>0&&c.t===i.trigger)||0!==c.c.length&&!this.checksPass(c.c,t));l++);e.logIt("matched on row: "+l),t.row=c,t.lastRow=l,c.a.length>0&&(t=this.doActions(c.a,t)),this.endGameState=t,this.envLoading=this.insLoading=this.outLoading=!1,this.envDoneLoading=this.insDoneLoading=this.outDoneLoading=!0,this.loadTimer=setInterval(this.loadWatcher,250)}}],[{key:"logIt",value:function(e){console.log("LoopProcessor: "+e)}}]),e}(),H=A,z=n(0),G=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return console.log("DialogState rendering..."),Object(z.jsx)("div",{className:"DialogState",children:Object(z.jsxs)("table",{className:"DialogStateTable",children:[Object(z.jsx)("thead",{className:"DialogStateHeader",children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("th",{children:"World"}),Object(z.jsx)("th",{children:"Zone"}),Object(z.jsx)("th",{children:"NPC"}),Object(z.jsx)("th",{children:"Trigger"}),Object(z.jsx)("th",{children:"NxTrigger"}),Object(z.jsx)("th",{children:"Delay"}),Object(z.jsx)("th",{children:"RESET"})]})}),Object(z.jsx)("tbody",{className:"DialogStateContent",children:Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:this.props.gameState.location.world}),Object(z.jsx)("td",{children:this.props.gameState.location.zone}),Object(z.jsx)("td",{children:this.props.gameState.location.npc}),Object(z.jsx)("td",{children:this.props.gameState.loop.trigger}),Object(z.jsx)("td",{children:this.props.gameState.loop.nxtrigger}),Object(z.jsx)("td",{children:this.props.gameState.loop.delay}),Object(z.jsx)("td",{children:Object(z.jsx)("button",{type:"button",value:"Reset Game",onClick:function(t){e.props.gameState.resetHandler(t)},children:"Reset Game"})})]})})]})})}}]),n}(a.Component),E=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).composeOptions=a.composeOptions.bind(Object(c.a)(a)),a}return Object(o.a)(n,[{key:"composeOptions",value:function(e){var t=this,n=[];return n.push({id:"none",display:""}),this.props.gameState.location.getZone(e).adjacents.forEach((function(e,a,s){var r=t.props.gameState.location.getZone(e);null!=r&&n.push(r)})),n.map((function(e){return Object(z.jsx)("option",{value:e.id,children:e.display},e.id)}))}},{key:"render",value:function(){var e=this;console.log("LocationSelector rendering...");var t=this.composeOptions(this.props.gameState.location.zone);return Object(z.jsxs)("table",{className:"LocationSelectorTable",children:[Object(z.jsx)("thead",{className:"LocationSelectorHeader",children:Object(z.jsx)("tr",{children:Object(z.jsx)("th",{children:"Move To"})})}),Object(z.jsx)("tbody",{className:"LocationSelectorContent",children:Object(z.jsx)("tr",{children:Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.location.zone,id:"zone",name:"zone",size:"1",onChange:function(t){e.props.gameState.location.locHandler(t)},children:t})})})})]})}}]),n}(a.Component),F=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).composeOptions=a.composeOptions.bind(Object(c.a)(a)),a}return Object(o.a)(n,[{key:"composeOptions",value:function(e){var t=this.props.gameState.location.getZone(e).npcs;return[{id:"none",display:""}].concat(t).map((function(e){return Object(z.jsx)("option",{value:e.id,children:e.display},e.id)}))}},{key:"render",value:function(){var e=this;console.log("NPCSelector rendering...");var t=this.composeOptions(this.props.gameState.location.zone);return Object(z.jsxs)("table",{className:"NPCSelectorTable",children:[Object(z.jsx)("thead",{className:"NPCSelectorHeader",children:Object(z.jsx)("tr",{children:Object(z.jsx)("th",{children:"Talk To"})})}),Object(z.jsx)("tbody",{className:"NPCSelectorContent",children:Object(z.jsx)("tr",{children:Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.location.npc,id:"npc",name:"npc",size:"1",onChange:function(t){e.props.gameState.location.npcHandler(t)},children:t})})})})]})}}]),n}(a.Component),D=new Map,T=function(){function e(t){var n,a,s,r,o,c,l,h,d,p,b,m,f,O,v,x;Object(i.a)(this,e),this.loadGame=Object(g.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j.getApplicationJson("/agent/options").then((function(t){e.logIt("async loading complete..."),D=new Map(Object.entries(t))})).catch((function(t){throw e.logIt("async loading returned with error..."),new Error(t.message)}));case 2:case"end":return t.stop()}}),t)}))),this.uid=null!==(n=t.uid)&&void 0!==n?n:Date.now(),this.firstName=null!==(a=t.firstName)&&void 0!==a?a:"Test",this.lastName=null!==(s=t.lastName)&&void 0!==s?s:"Player",this.age=null!==(r=t.age)&&void 0!==r?r:18,this.gender=null!==(o=t.gender)&&void 0!==o?o:"male",this.race=null!==(c=t.race)&&void 0!==c?c:"american",this.skin=null!==(l=t.skin)&&void 0!==l?l:"white",this.eyes=null!==(h=t.eyes)&&void 0!==h?h:"brown",this.hair=null!==(d=t.hair)&&void 0!==d?d:"blond",this.cloth=null!==(p=t.cloth)&&void 0!==p?p:"grey",this.height=null!==(b=t.height)&&void 0!==b?b:0,this.weight=null!==(m=t.weight)&&void 0!==m?m:0,this.cleanliness=null!==(f=t.cleanliness)&&void 0!==f?f:0,this.beauty=null!==(O=t.beauty)&&void 0!==O?O:0,this.strength=null!==(v=t.strength)&&void 0!==v?v:0,this.handler=null!==(x=t.agentHandler)&&void 0!==x?x:"",this.isLoaded=this.isLoaded.bind(this),this.loadGame=this.loadGame.bind(this),this.setHandlers=this.setHandlers.bind(this),0===D.size&&this.loadGame()}return Object(o.a)(e,[{key:"setHandlers",value:function(e){this.handler=e.agentHandler}},{key:"isLoaded",value:function(){return D.size>0}}],[{key:"logIt",value:function(e){}},{key:"getAllOptions",value:function(){return D}},{key:"getOptionsFor",value:function(t){return e.logIt("getting options for KEY: "+t),D.has(t.toLowerCase())?D.get(t.toLowerCase()):(e.logIt("returning EMPTY options for KEY: "+t),{})}}]),e}(),R=[],J=[],K=[],Z=[],W=[],V=[],$=[],B=[],U=[],_=[],Y=[],q=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).composeOptions=a.composeOptions.bind(Object(c.a)(a)),a}return Object(o.a)(n,[{key:"composeOptions",value:function(e){return Array.from(e).map((function(e){return Object(z.jsx)("option",{value:e.id,children:e.text},e.id)}))}},{key:"render",value:function(){var e=this;return n.logIt("rendering player options..."),0==R.length&&(R=this.composeOptions(T.getOptionsFor("race")),J=this.composeOptions(T.getOptionsFor("gender")),K=this.composeOptions(T.getOptionsFor("skin")),Z=this.composeOptions(T.getOptionsFor("eye")),W=this.composeOptions(T.getOptionsFor("hair")),V=this.composeOptions(T.getOptionsFor("cloth")),$=this.composeOptions(T.getOptionsFor("height")),B=this.composeOptions(T.getOptionsFor("weight")),U=this.composeOptions(T.getOptionsFor("clean")),_=this.composeOptions(T.getOptionsFor("beauty")),Y=this.composeOptions(T.getOptionsFor("strength"))),Object(z.jsxs)("table",{className:"PlayerProfileTable",children:[Object(z.jsx)("thead",{className:"PlayerProfileHeader",children:Object(z.jsx)("tr",{children:Object(z.jsx)("th",{colSpan:"2",children:"Player Profile"})})}),Object(z.jsxs)("tbody",{className:"PlayerProfileContent",children:[Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"uid",children:"UID: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("input",{type:"number",id:"uid",name:"uid",placeholder:"Integer",size:"20",min:"0",step:"1",value:this.props.gameState.player.uid,onChange:function(t){e.props.gameState.player.handler(t)}})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"firstName",children:"First Name: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("input",{type:"text",id:"firstName",name:"firstName",placeholder:"First Name",size:"20",autoComplete:"off",value:this.props.gameState.player.firstName,onChange:function(t){e.props.gameState.player.handler(t)}})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"lastName",children:"Last Name: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("input",{type:"text",id:"lastName",name:"lastName",placeholder:"Last Name",size:"20",autoComplete:"off",value:this.props.gameState.player.lastName,onChange:function(t){e.props.gameState.player.handler(t)}})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"age",children:"Age: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("input",{type:"number",id:"age",name:"age",placeholder:"Integer",size:"3",min:"18",max:"99",step:"1",value:this.props.gameState.player.age,onChange:function(t){e.props.gameState.player.handler(t)}})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"gender",children:"Gender: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.player.gender,id:"gender",name:"gender",size:"1",onChange:function(t){e.props.gameState.player.handler(t)},children:J})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"race",children:"Race: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.player.race,id:"race",name:"race",size:"1",onChange:function(t){e.props.gameState.player.handler(t)},children:R})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"skin",children:"Skin: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.player.skin,id:"skin",name:"skin",size:"1",onChange:function(t){e.props.gameState.player.handler(t)},children:K})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"eyes",children:"Eyes: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.player.eyes,id:"eyes",name:"eyes",size:"1",onChange:function(t){e.props.gameState.player.handler(t)},children:Z})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"hair",children:"Hair: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.player.hair,id:"hair",name:"hair",size:"1",onChange:function(t){e.props.gameState.player.handler(t)},children:W})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"cloth",children:"Cloth: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.player.cloth,id:"cloth",name:"cloth",size:"1",onChange:function(t){e.props.gameState.player.handler(t)},children:V})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"height",children:"Height: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.player.height,id:"height",name:"height",size:"1",onChange:function(t){e.props.gameState.player.handler(t)},children:$})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"weight",children:"Weight: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.player.weight,id:"weight",name:"weight",size:"1",onChange:function(t){e.props.gameState.player.handler(t)},children:B})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"cleanliness",children:"Cleanliness: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.player.cleanliness,id:"cleanliness",name:"cleanliness",size:"1",onChange:function(t){e.props.gameState.player.handler(t)},children:U})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"beauty",children:"Beauty: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.player.beauty,id:"beauty",name:"beauty",size:"1",onChange:function(t){e.props.gameState.player.handler(t)},children:_})})]}),Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)("label",{htmlFor:"strength",children:"Strength: "})}),Object(z.jsx)("td",{children:Object(z.jsx)("select",{value:this.props.gameState.player.strength,id:"strength",name:"strength",size:"1",onChange:function(t){e.props.gameState.player.handler(t)},children:Y})})]})]})]})}}],[{key:"logIt",value:function(e){}}]),n}(a.Component),Q=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).composeOptions=a.composeOptions.bind(Object(c.a)(a)),a}return Object(o.a)(n,[{key:"composeOptions",value:function(e){var t=this,n=0;return e.map((function(e){return Object(z.jsx)("div",{children:Object(z.jsxs)("a",{className:"nounderline",onClick:function(n){t.props.gameState.outHandler(new N({trigger:e.trigger,actions:e.actions}))},nofollow:"true",children:[" ",e.message," "]})},"option"+n++)}))}},{key:"render",value:function(){console.log("DialogOptions rendering...");var e=this.composeOptions(this.props.gameState.outOptions);return Object(z.jsx)("section",{className:"DialogOptions",children:e})}}]),n}(a.Component),X=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a,s,r,o;return Object(i.a)(this,n),(o=t.call(this,e)).narrate=null===(a=e.narrate)||void 0===a||a,o.environ=null===(s=e.environ)||void 0===s||s,o.atmos=null===(r=e.atmos)||void 0===r||r,o}return Object(o.a)(n,[{key:"render",value:function(){var e=this;return console.log("AudioFlags rendering..."),Object(z.jsxs)("table",{className:"AudioFlagsTable",children:[Object(z.jsx)("thead",{className:"AudioFlagsHeader",children:Object(z.jsx)("tr",{children:Object(z.jsx)("th",{children:"Audio"})})}),Object(z.jsxs)("tbody",{className:"AudioFlagsContent",children:[Object(z.jsx)("tr",{children:Object(z.jsxs)("td",{children:[Object(z.jsx)("input",{type:"checkbox",checked:this.props.gameState.audioFlags.narrate,id:"narrate",name:"narrate",onChange:function(t){e.props.gameState.audioHandler(t)}}),Object(z.jsx)("label",{for:"narrate",children:"Narrate"}),Object(z.jsx)("audio",{id:"voice_narrate",name:"voice_narrate",autoPlay:!0})]})}),Object(z.jsx)("tr",{children:Object(z.jsxs)("td",{children:[Object(z.jsx)("input",{type:"checkbox",checked:this.props.gameState.audioFlags.environ,id:"environ",name:"environ",onChange:function(t){e.props.gameState.audioHandler(t)}}),Object(z.jsx)("label",{for:"environ",children:"Environ"}),Object(z.jsx)("audio",{id:"voice_environ",name:"voice_environ",autoPlay:!0})]})}),Object(z.jsx)("tr",{children:Object(z.jsxs)("td",{children:[Object(z.jsx)("input",{type:"checkbox",checked:this.props.gameState.audioFlags.atmos,id:"atmos",name:"atmos",onChange:function(t){e.props.gameState.audioHandler(t)}}),Object(z.jsx)("label",{for:"atmos",children:"Atmos"}),Object(z.jsx)("audio",{id:"voice_atmos",name:"voice_atmos",autoPlay:!0})]})})]})]})}}]),n}(a.Component),ee=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e;console.log("MainContent rendering...");var t=null!==(e=this.props.gameState.location.getZone(this.props.gameState.location.zone).display)&&void 0!==e?e:"";return Object(z.jsx)("div",{className:"MainContent",children:Object(z.jsx)("table",{className:"MainContentTable",children:Object(z.jsxs)("tbody",{children:[Object(z.jsxs)("tr",{children:[Object(z.jsxs)("td",{className:"PlayerDialogPane",children:[t,Object(z.jsx)("br",{}),Object(z.jsx)("textarea",{rows:"32",cols:"70",placeholder:"",id:"playerview",name:"playerview",maxLength:"1024",value:this.props.gameState.instext,readOnly:!0})]}),Object(z.jsx)("td",{className:"NPCDialogPane",children:Object(z.jsx)(Q,{gameState:this.props.gameState})}),Object(z.jsxs)("td",{className:"MainContentRightPane",children:[Object(z.jsx)("section",{children:Object(z.jsxs)("table",{children:[Object(z.jsxs)("tr",{children:[Object(z.jsx)("td",{children:Object(z.jsx)(E,{gameState:this.props.gameState})}),Object(z.jsx)("td",{rowSpan:"2",children:Object(z.jsx)(X,{gameState:this.props.gameState})})]}),Object(z.jsx)("tr",{children:Object(z.jsx)("td",{children:Object(z.jsx)(F,{gameState:this.props.gameState})})})]})}),Object(z.jsx)(q,{gameState:this.props.gameState})]})]}),Object(z.jsx)("tr",{children:Object(z.jsx)("td",{colSpan:"3",className:"EnvDialogPane",children:Object(z.jsx)("textarea",{rows:"8",cols:"181",placeholder:"Environment Text",id:"envview",name:"envview",maxLength:"1024",value:this.props.gameState.envtext,readOnly:!0})})})]})})})}}]),n}(a.Component),te=ee,ne=function(){function e(t){var n=this;Object(i.a)(this,e),this.loadGame=Object(g.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.loaded=!1,e.next=3,j.getApplicationJson("/locations").then((function(e){console.log("LocationInfo async loading complete..."),n.worldInfo=e.worldInfo,n.world=n.worldInfo[0].world,n.zoneInfo=e.zoneInfo,n.zone=n.zoneInfo[0].id,n.loaded=!0})).catch((function(e){throw console.log("LocationInfo async loading returned with error..."),new Error(e.message)}));case 3:case"end":return e.stop()}}),e)}))),this.loaded=!1,this.worldInfo=[],this.zoneInfo=[],this.world="",this.zone="",this.npc="none",this.locHandler="",this.npcHandler="",this.getStartLocation=this.getStartLocation.bind(this),this.getZone=this.getZone.bind(this),this.getZones=this.getZones.bind(this),this.getNPCs=this.getNPCs.bind(this),this.setNPCs=this.setNPCs.bind(this),this.toString=this.toString.bind(this),this.loadGame=this.loadGame.bind(this),this.isLoaded=this.isLoaded.bind(this),this.setHandlers=this.setHandlers.bind(this),this.loadGame()}return Object(o.a)(e,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setHandlers",value:function(e){var t,n;return this.locHandler=null!==(t=e.locHandler)&&void 0!==t?t:"",this.npcHandler=null!==(n=e.npcHandler)&&void 0!==n?n:"",this}},{key:"toString",value:function(){return"World: "+this.world.display+", Zone: "+this.zone.display+", NPC: "+this.npc}},{key:"getStartLocation",value:function(){return this.zoneInfo[0]}},{key:"getZone",value:function(t){e.logIt("getZone for: "+t);var n=null;return this.zoneInfo.forEach((function(e,a,s){e.id===t&&(n=e)})),e.logIt("getZone match = "+n.id),n}},{key:"getZones",value:function(){return e.logIt("getZones..."),this.world.zones}},{key:"getNPCs",value:function(t){e.logIt("getNPCs for: "+t);var n=[];return this.zoneInfo.forEach((function(e,a,s){e.id===t&&(n=e.npcs)})),n}},{key:"setNPCs",value:function(t,n){e.logIt("setNPCs for: "+t),this.zoneInfo.forEach((function(e,a,s){e.id===t&&(e.npcs=n)}))}}],[{key:"logIt",value:function(e){}}]),e}(),ae=function(){function e(t){var n,a,s;Object(i.a)(this,e),this.trigger=null!==(n=t.trigger)&&void 0!==n?n:"",this.nxtrigger=null!==(a=t.nxtrigger)&&void 0!==a?a:"",this.delay=null!==(s=t.delay)&&void 0!==s?s:2}return Object(o.a)(e,null,[{key:"getStartLoop",value:function(){return new e({trigger:"start",nxtrigger:"",delay:2})}}]),e}(),se=function e(t){var n,a,s,r,o,c,l;Object(i.a)(this,e),this.location=null!==(n=t.location)&&void 0!==n?n:new ne(t),this.loop=null!==(a=t.loop)&&void 0!==a?a:ae.getStartLoop(),this.player=null!==(s=t.player)&&void 0!==s?s:T.getTestPlayer(),this.audioFlags=null!==(r=t.audioFlags)&&void 0!==r?r:new X({narrate:!0,environ:!0,atmos:!0}),this.envtext=null!==(o=t.envtext)&&void 0!==o?o:"",this.instext=null!==(c=t.instext)&&void 0!==c?c:"",this.outOptions=null!==(l=t.outOptions)&&void 0!==l?l:[new N({message:"I got nothin."})],this.envHandler=t.envHandler,this.insHandler=t.insHandler,this.outHandler=t.outHandler,this.resetHandler=t.resetHandler,this.audioHandler=t.audioHandler},re=function(){function e(){var t=this;Object(i.a)(this,e),this.loadGame=Object(g.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loaded=!1,e.next=3,j.getApplicationJson("/logic").then((function(e){console.log("BusinessMurder async loading complete..."),t.logic=e.logic,t.loaded=!0})).catch((function(e){throw console.log("BusinessMurder async loading returned with error..."),new Error(e.message)}));case 3:case"end":return e.stop()}}),e)}))),this.name="Business of Murder",this.logic=[],this.loaded=!1,this.loadGame=this.loadGame.bind(this),this.isLoaded=this.isLoaded.bind(this),this.getLogic=this.getLogic.bind(this),this.getName=this.getName.bind(this),this.loadGame()}return Object(o.a)(e,[{key:"isLoaded",value:function(){return this.loaded}},{key:"getLogic",value:function(){return this.logic}},{key:"getName",value:function(){return this.name}}]),e}(),ie=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).loading=!0,a.logic=new re({}),a.locations=new ne({}),a.player=new T({}),a.looper={},a.state={},a.handleLocationChange=a.handleLocationChange.bind(Object(c.a)(a)),a.handleNPCChange=a.handleNPCChange.bind(Object(c.a)(a)),a.handleProfileChange=a.handleProfileChange.bind(Object(c.a)(a)),a.handleLoopState=a.handleLoopState.bind(Object(c.a)(a)),a.finishLoop=a.finishLoop.bind(Object(c.a)(a)),a.handleOutputs=a.handleOutputs.bind(Object(c.a)(a)),a.componentSaveState=a.componentSaveState.bind(Object(c.a)(a)),a.componentClearState=a.componentClearState.bind(Object(c.a)(a)),a.handleResetGame=a.handleResetGame.bind(Object(c.a)(a)),a.componentStartGame=a.componentStartGame.bind(Object(c.a)(a)),a.handleAudio=a.handleAudio.bind(Object(c.a)(a)),a.loadWait=a.loadWait.bind(Object(c.a)(a)),a.loadTimer=setInterval((function(){return a.loadWait()}),200),a}return Object(o.a)(n,[{key:"loadWait",value:function(){this.logic.isLoaded()&&this.locations.isLoaded()&&this.player.isLoaded()&&(console.log("Game LOADING completed..."),this.loading=!1,clearInterval(this.loadTimer),this.componentStartGame())}},{key:"componentStartGame",value:function(){var e=this;console.log("Game is now starting..."),this.looper=new H({name:this.logic.getName(),logic:this.logic.getLogic()}),this.looper.setHandlers({outHandler:this.handleOutputs}),this.locations.setHandlers({locHandler:this.handleLocationChange,npcHandler:this.handleNPCChange}),this.player.setHandlers({agentHandler:this.handleProfileChange}),this.setState({loopProc:this.looper,gameState:new se({instext:"",envtext:"",location:this.locations,player:this.player,audioFlags:new X({environ:!0,narrate:!0,atmos:!0}),outHandler:this.handleOutputs,resetHandler:this.handleResetGame,audioHandler:this.handleAudio})}),this.loopTimer=setInterval((function(){return e.handleLoopState()}),1e3*this.state.gameState.loop.delay)}},{key:"handleResetGame",value:function(e){this.componentClearState(),this.componentStartGame()}},{key:"componentClearState",value:function(){localStorage.removeItem("player"),localStorage.removeItem("world"),localStorage.removeItem("zone"),localStorage.removeItem("zones")}},{key:"componentSaveState",value:function(){localStorage.setItem("player",JSON.stringify(this.state.gameState.player)),localStorage.setItem("world",this.state.gameState.location.world),localStorage.setItem("zone",this.state.gameState.location.zone),localStorage.setItem("zones",JSON.stringify(this.state.gameState.location.zoneInfo))}},{key:"handleAudio",value:function(e){console.log("App.handleAudio processing event.");var t=this.state.gameState,n=t.audioFlags;switch(e.target.id){case"narrate":n.narrate=e.target.checked;break;case"environ":n.environ=e.target.checked;break;case"atmos":n.atmos=e.target.checked;break;default:console.log("App.handleAudio IGNORED event from target.id '"+e.target.id+"'")}t.audioFlags=n,this.setState({gameState:t}),this.forceUpdate()}},{key:"handleOutputs",value:function(e){console.log("App.handleOutputs processing options.");var t=this.state.gameState;null!=e.trigger&&e.trigger.length>0&&(t.loop.trigger=e.trigger),null!=e.actions&&e.actions.length>0&&(t=this.state.loopProc.doActions(e.actions,t)),this.setState({gameState:t}),this.forceUpdate()}},{key:"handleLoopState",value:function(){console.log("App.handleLoopState PROCESSING..."),clearInterval(this.loopTimer),this.state.loopProc.processLoop(this.state.gameState,this.finishLoop)}},{key:"finishLoop",value:function(e){var t=this;this.setState({gameState:e}),console.log("App.handleLoopState FINISHED "),this.loopTimer=setInterval((function(){return t.handleLoopState()}),1e3*e.loop.delay)}},{key:"handleLocationChange",value:function(e){console.log("App.handleLocationChange processing event."),clearInterval(this.loopTimer);var t=e.target.value,n=this.state.gameState,a=n.location;"zone"===e.target.id?a.zone=t:a.world=t,n.location=a,n.instext="",this.setState({gameState:n}),this.handleLoopState()}},{key:"handleNPCChange",value:function(e){console.log("App.handleNPCChange processing event.");var t=e.target.value,n=this.state.gameState,a=n.location;a.npc=t,n.location=a,this.setState({gameState:n}),this.forceUpdate()}},{key:"handleProfileChange",value:function(e){if(console.log("App.handleProfileChange processing event."),e&&this.state.gameState){var t=e.target,n=t.name,a=t.value,s=this.state.gameState,r=s.player;switch(n){case"uid":r.uid=a;break;case"firstName":r.firstName=a;break;case"lastName":r.lastName=a;break;case"age":r.age=a;break;case"gender":r.gender=a;break;case"race":r.race=a;break;case"skin":r.skin=a;break;case"eyes":r.eyes=a;break;case"hair":r.hair=a;break;case"cloth":r.cloth=a;break;case"height":r.height=a;break;case"weight":r.weight=a;break;case"cleanliness":r.cleanliness=a;break;case"beauty":r.beauty=a;break;case"strength":r.strength=a;break;default:console.log("App.handleProfileChange IGNORED an unknown field name.")}s.player=r,this.setState({gameState:s})}else console.log("App.handleProfileChange bypassed invalid event or gameState...");this.forceUpdate()}},{key:"render",value:function(){return console.log("App rendering..."),!0===this.loading?Object(z.jsx)("div",{className:"App",children:"Loading..."}):Object(z.jsxs)("div",{className:"App",children:[Object(z.jsx)(G,{gameState:this.state.gameState}),Object(z.jsx)(te,{gameState:this.state.gameState})]})}},{key:"componentDidMount",value:function(){if(!1===this.loading){console.log("App.componentDidMount processing..."),window.addEventListener("beforeunload",this.componentSaveState);var e=this.state.gameState,t=localStorage.getItem("player"),n=localStorage.getItem("zones"),a=localStorage.getItem("world"),s=localStorage.getItem("zone");t&&(e.player=JSON.parse(t)),n&&(e.location.zoneInfo=JSON.parse(n)),a&&(e.location.world=a),s&&(e.location.zone=s),this.setState({loopProc:this.looper,gameState:e})}else console.log("BYPASSED App.componentDidMount processing while loading data...")}},{key:"componentWillUnmount",value:function(){this.componentSaveState(),window.removeEventListener("beforeunload",this.componentSaveState)}}]),n}(a.Component);r.a.render(Object(z.jsx)(ie,{props:!0}),document.getElementById("root"))},9:function(e,t,n){}},[[19,1,2]]]);
//# sourceMappingURL=main.cfe72579.chunk.js.map